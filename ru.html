<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <title>XKCD –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</title>
    <script>
        async function makePassword() {
            // –°–∫–∞—á–∏–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ EFF –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å. –ù–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–º–∏
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt –∏ –∂–º–µ–º F12 —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å

            // await fetch(location.href, { integrity: 'sha384-08Zyc2ydrI+QM7TP2c1fgd3aA/gqwudW0UMg0DqfFf0fqP4CVuU45K7lnlUry9Ts' }).then((res) => res.text())

            // –ü–æ—è–≤–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤, –±–µ–∑ –æ—à–∏–±–∫–∏
            // –ö–æ–ø–∏—Ä—É–µ–º —ç—Ç–æ—Ç –∫–æ–¥, –º–µ–Ω—è–µ–º –ª—é–±–æ–π —Å–∏–º–≤–æ–ª (–∫—Ä–æ–º–µ sha384-, —ç—Ç–æ —Ç–∏–ø —Ö–µ—à–∞) –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –µ–≥–æ
            // –ü–æ—è–≤–∏—Ç—Å—è –æ—à–∏–±–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
            const wordList = await fetch("./eff_large_wordlist.txt", { integrity: 'sha384-08Zyc2ydrI+QM7TP2c1fgd3aA/gqwudW0UMg0DqfFf0fqP4CVuU45K7lnlUry9Ts' }).then((res) => res.text());

            // –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–ª–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
            const words = [...wordList.matchAll(/[a-z]+/g)].map(([word]) => word);

            // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª
            const passwordWordIds = new Uint16Array(4);

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –µ–≥–æ –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–º–∏ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
            crypto.getRandomValues(passwordWordIds);

            // –°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –Ω–æ–º–µ—Ä —Å–ª–æ–≤—É. –£ –Ω–∞—Å –±—É–¥–µ—Ç 4 —Å–ª–æ–≤–∞ –ø–æ 4096 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–º, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ 12 –±–∏—Ç —ç–Ω—Ç—Ä–æ–ø–∏–∏ –Ω–∞ —Å–ª–æ–≤–æ, 48 –±–∏—Ç –≤—Å–µ–≥–æ
            return [...passwordWordIds].map(id => words[id % 4096]).join(' ');
        }

        window.addEventListener('DOMContentLoaded', () => {
            makePassword()
                // –°–æ–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                .then(password =>
                    `<div>–í–∞—à –ø–∞—Ä–æ–ª—å —Å 48 –±–∏—Ç–Ω–æ–π —ç–Ω—Ç—Ä–æ–ø–∏–µ–π:</div>` +
                    `<div class="password-text">${password}</div>` +
                    `<div>–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à, —á—Ç–æ–±—ã –±—ã—Ç—å –º–∞—Å—Ç–µ—Ä –ø–∞—Ä–æ–ª–µ–º, –¥–µ—Ä–∂–∏—Ç–µ –≤ —Å–µ–∫—Ä–µ—Ç–µ. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω</div>`
                )
                // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
                .catch(() => '–í–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞')
                // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
                .then(message => document.querySelector('.password').innerHTML = message);
        });
    </script>
    <style>
        body {
            font-size: 20px;
            line-height: 40px;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-evenly;
            row-gap: 20px;
        }

        img {
            object-fit: contain;
        }

        .languages {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-flow: column;
        }

        .language-selector {
            text-decoration: none;
            font-size: 50px;
            margin: 10px;
        }

        .description {
            display: flex;
            justify-content: center;
            flex-direction: column;
            max-width: calc(100% - 400px);
        }

        .password-container {
            flex-basis: 100%;
            display: flex;
            justify-content: center;
        }

        .password-text {
            font-size: 42px;
            margin: 10px 0;
            font-weight: bold;
        }

        .password {
            padding: 20px;
            justify-content: center;
            display: flex;
            flex-flow: column;
            background-color: lightgray;
        }

        .wow {
            margin: 5px;
            display: block;
        }

        .xkcd-line {
            flex-basis: 100%;
            display: flex;
            flex-direction: row;
            justify-content: center;
            flex-wrap: wrap;
        }

        .xkcd-item {
            display: block;
            margin: 5px;
        }

        .xkcd-image {
            width: 100%;
        }

        @media (max-width: 1220px) {

            body {
                font-size: 15px;
                line-height: 30px;
            }

            .languages {
                flex-flow: row;
            }

            .password-text {
                font-size: 30px;
            }

            body {
                row-gap: 5px;
            }

            .password-container {
                order: 1;
            }

            .description {
                order: 2;
                max-width: unset;
            }

            .xkcd-line {
                order: 3;
            }

            .wow {
                order: 4;
            }
        }

        @media (max-width: 750px) {
            .password-text {
                font-size: 15px;
            }
        }
    </style>
</head>

<body>
    <div class="languages">
        <a href="./" class="language-selector">üá∫üá∏</a>
        <a href="./ru.html" class="language-selector">üá∑üá∫</a>
    </div>
    <div class="description">
        <div class="description-text">–ù–∞–¥–µ–∂–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä XKCD –ø–∞—Ä–æ–ª–µ–π (–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π).</div>
        <div class="description-text">
            –õ–µ–≥–∫–∏–π, –±–µ–∑ JS –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ <a
                href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API" target="_blank"
                rel="noopener">Web Crypto API</a> –∏ <a
                href="https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt" target="_blank" rel="noopener">—Å–ø–∏—Å–∫–µ
                —Å–ª–æ–≤ –æ—Ç EFF</a>.
        </div>
        <div class="description-text">
            <b>–ù–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ, –¥–æ–±–∞–≤—å—Ç–µ <code>view-source:</code> –ø–µ—Ä–µ–¥ –∞–¥—Ä–µ—Å–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–æ–¥ —Ö–æ—Ä–æ—à–æ
                –æ—Ç–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω.</b>
        </div>
        <div class="description-text">–î–ª—è –±–æ–ª—å—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ, –≤ –Ω–µ–º –≤—ã–∫–ª—é—á–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.
        </div>
    </div>
    <img src="./img/wow.jpeg" class="wow" />
    <div class="password-container">
        <div class="password">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</div>
    </div>
    <div class="xkcd-line">
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd1.png" class="xkcd-image" />
        </a>
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd2.png" class="xkcd-image" />
        </a>
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd3.png" class="xkcd-image" />
        </a>
    </div>
    <div class="xkcd-line">
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd4.png" class="xkcd-image" />
        </a>
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd5.png" class="xkcd-image" />
        </a>
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd6.png" class="xkcd-image" />
        </a>
    </div>
    <div class="xkcd-line">
        <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
            <img src="./img/ru/xkcd7.png" class="xkcd-image" />
        </a>
    </div>
</body>

</html>
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <title>XKCD –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</title>
    <link rel="stylesheet" type="text/css" href="./res/style.css" />
  </head>
  <body>
    <script>
      async function makePassword({ wordlistUrl, integrity }) {
        // –°–∫–∞—á–∏–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ–≥–æ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
        const wordlist = await fetch(wordlistUrl, { integrity }).then((res) => res.text());

        // –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–ª–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –æ–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–ª–æ–≤–∞ –ø–æ—Å–ª–µ 5 —Ü–∏—Ñ—Ä –∏ —Ç–∞–±–∞
        const words = [...wordlist.matchAll(/[0-9]{5}	(.*)/g)].map(([, word]) => word);

        // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª
        const passwordWordIds = new Uint16Array(4);

        // –ó–∞–ø–æ–ª–Ω—è–µ–º –µ–≥–æ –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏–º–∏ –ø—Å–µ–≤–¥–æ—Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
        crypto.getRandomValues(passwordWordIds);

        // –°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π –Ω–æ–º–µ—Ä —Å–ª–æ–≤—É. –£ –Ω–∞—Å –±—É–¥–µ—Ç 4 —Å–ª–æ–≤–∞ –ø–æ 4096 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–º, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ 12 –±–∏—Ç —ç–Ω—Ç—Ä–æ–ø–∏–∏ –Ω–∞ —Å–ª–æ–≤–æ, 48 –±–∏—Ç –≤—Å–µ–≥–æ
        return [...passwordWordIds].map((id) => words[id % 4096]).join(" ");
      }

      window.addEventListener("DOMContentLoaded", () => {
        Promise.all([
          // –ù–µ –¥–æ–≤–µ—Ä–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
          // –û—Ç–∫—Ä—ã–≤–∞–µ–º https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt
          // –ù–∞–∂–∏–º–∞–µ–º F12 –∏ –ø–∏—à–µ–º
          // await fetch(location.href, { integrity: 'sha384-08Zyc2ydrI+QM7TP2c1fgd3aA/gqwudW0UMg0DqfFf0fqP4CVuU45K7lnlUry9Ts' }).then((res) => res.text())
          // –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —É—Å–ø–µ—à–Ω–∞
          // –ò–∑–º–µ–Ω–∏—Ç–µ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –≤ —Ö–µ—à–µ –∫—Ä–æ–º–µ sha384-, —Ç–∫ —ç—Ç–æ –µ–≥–æ —Ç–∏–ø –∏ –Ω–∞–∂–º–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
          // –í—ã —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
          makePassword({ wordlistUrl: "./res/eff_large_wordlist.txt", integrity: "sha384-08Zyc2ydrI+QM7TP2c1fgd3aA/gqwudW0UMg0DqfFf0fqP4CVuU45K7lnlUry9Ts" }),
          // –ù–µ –¥–æ–≤–µ—Ä–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
          // –û—Ç–∫—Ä—ã–≤–∞–µ–º https://theworld.com/%7Ereinhold/diceware.wordlist.asc
          // –ù–∞–∂–∏–º–∞–µ–º F12 –∏ –ø–∏—à–µ–º
          // await fetch(location.href, { integrity: 'sha384-4n493bkdsfRTGItNlVLnGkWyGb/YfACD/+Iu6/yor5D06tbp3cAZAFzM2z8SIJYe' }).then((res) => res.text())
          // –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —É—Å–ø–µ—à–Ω–∞
          // –ò–∑–º–µ–Ω–∏—Ç–µ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –≤ —Ö–µ—à–µ –∫—Ä–æ–º–µ sha384-, —Ç–∫ —ç—Ç–æ –µ–≥–æ —Ç–∏–ø –∏ –Ω–∞–∂–º–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
          // –í—ã —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
          makePassword({ wordlistUrl: "./res/diceware_wordlist.txt", integrity: "sha384-4n493bkdsfRTGItNlVLnGkWyGb/YfACD/+Iu6/yor5D06tbp3cAZAFzM2z8SIJYe" }),
        ])
          // –°–æ–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
          .then(
            (passwords) =>
              "<div>–í–∞—à –ø–∞—Ä–æ–ª—å —Å 48 –±–∏—Ç–Ω–æ–π —ç–Ω—Ç—Ä–æ–ø–∏–µ–π –ø–æ —Å–ø–∏—Å–∫—É EFF:</div>" +
              '<div class="password-text">' +
              passwords[0] +
              "</div>" +
              "<div>–í–∞—à –ø–∞—Ä–æ–ª—å —Å 48 –±–∏—Ç–Ω–æ–π —ç–Ω—Ç—Ä–æ–ø–∏–µ–π –ø–æ —Å–ø–∏—Å–∫—É diceware(tm):</div>" +
              '<div class="password-text">' +
              passwords[1] +
              "</div>" +
              "<div>–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à, —á—Ç–æ–±—ã –±—ã—Ç—å –º–∞—Å—Ç–µ—Ä –ø–∞—Ä–æ–ª–µ–º, –¥–µ—Ä–∂–∏—Ç–µ –≤ —Å–µ–∫—Ä–µ—Ç–µ. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω</div>"
          )
          // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
          .catch(() => "–í–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞")
          // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
          .then((message) => (document.querySelector(".password").innerHTML = message));
      });
    </script>
    <object data="./res/eff_large_wordlist.txt">
      <!-- –ï—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ñ—Ñ–ª–∞–π–Ω, –±—Ä–∞—É–∑–µ—Ä –Ω—É–∂–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã -->
    </object>
    <object data="./res/diceware_wordlist.txt">
      <!-- –ï—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ñ—Ñ–ª–∞–π–Ω, –±—Ä–∞—É–∑–µ—Ä –Ω—É–∂–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –æ —Ç–æ–º, —á—Ç–æ–±—ã —Å–∫–∞—á–∞—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã -->
    </object>
    <div class="languages">
      <a href="./index.html" class="language-selector">üá∫üá∏</a>
      <a href="./ru.html" class="language-selector">üá∑üá∫</a>
    </div>
    <div class="description">
      <div class="description-text">–ù–∞–¥–µ–∂–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä XKCD –ø–∞—Ä–æ–ª–µ–π (–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π).</div>
      <div class="description-text">
        –õ–µ–≥–∫–∏–π, –±–µ–∑ JS –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API" target="_blank" rel="noopener">Web Crypto API</a> –∏
        <a href="https://www.eff.org/files/2016/07/18/eff_large_wordlist.txt" target="_blank" rel="noopener">—Å–ø–∏—Å–∫–µ —Å–ª–æ–≤ –æ—Ç EFF</a>.
      </div>
      <div class="description-text">
        <b>–ù–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ, –¥–æ–±–∞–≤—å—Ç–µ <code>view-source:</code> –ø–µ—Ä–µ–¥ –∞–¥—Ä–µ—Å–æ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–æ–¥ —Ö–æ—Ä–æ—à–æ –æ—Ç–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω.</b>
      </div>
      <div class="description-text">–î–ª—è –±–æ–ª—å—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ, –≤ –Ω–µ–º –≤—ã–∫–ª—é—á–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.</div>
    </div>
    <img src="./res/wow.jpeg" class="wow" />
    <div class="password-container">
      <div class="password">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</div>
    </div>
    <div class="xkcd-line">
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd1.png" class="xkcd-image" />
      </a>
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd2.png" class="xkcd-image" />
      </a>
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd3.png" class="xkcd-image" />
      </a>
    </div>
    <div class="xkcd-line">
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd4.png" class="xkcd-image" />
      </a>
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd5.png" class="xkcd-image" />
      </a>
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd6.png" class="xkcd-image" />
      </a>
    </div>
    <div class="xkcd-line">
      <a href="https://xkcd.ru/936/" target="_blank" rel="noopener" class="xkcd-item">
        <img src="./res/img-ru/xkcd7.png" class="xkcd-image" />
      </a>
    </div>
  </body>
</html>
